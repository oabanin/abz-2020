(self.webpackChunkabz_2020=self.webpackChunkabz_2020||[]).push([[156],{340:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return P}});var o=a(7294),t=a(3253),m=a.n(t),l=a(7803),n=a(2283);function i(e,r,a,o,t,m,l){try{var n=e[m](l),i=n.value}catch(e){return void a(e)}n.done?r(i):Promise.resolve(i).then(o,t)}var s=e=>{var[r,a]=(0,o.useState)([]),[t,m]=(0,o.useState)(!0),[l,n]=(0,o.useState)(null);(0,o.useEffect)((()=>{s()}),[]);var s=function(){var r,o=(r=function*(){try{var{data:r}=yield e();if(!r.success)throw Error("The API doesn't return positions");a(r.positions)}catch(e){var o,t;(null===(o=e.response)||void 0===o||null===(t=o.data)||void 0===t?void 0:t.message)?n(e.response.data.message):n(e.message)}finally{m(!1)}},function(){var e=this,a=arguments;return new Promise((function(o,t){var m=r.apply(e,a);function l(e){i(m,o,t,l,n,"next",e)}function n(e){i(m,o,t,l,n,"throw",e)}l(void 0)}))});return function(){return o.apply(this,arguments)}}();return{fetchedPositions:r,loadingPositions:t,errorPositions:l}},u=a(2190),c="E:\\NODE\\abz-2020\\src\\components\\form\\components\\positions\\positions.js",_=e=>{var{fetchedPositions:r,errors:a,register:t}=e,m=r.map((e=>o.createElement("div",{key:e.id,className:"form__radioWrapper",__source:{fileName:c,lineNumber:6,columnNumber:5}},o.createElement("input",{className:"form__radio",id:"form__radio".concat(e.id),type:"radio",name:"position_id",value:e.id,ref:t({required:"Position is required"}),__source:{fileName:c,lineNumber:7,columnNumber:7}}),o.createElement("label",{className:"form__radioLabel",htmlFor:"form__radio".concat(e.id),__source:{fileName:c,lineNumber:15,columnNumber:7}},e.name))));return o.createElement(o.Fragment,null,m,a.position_id&&o.createElement("div",{className:"form__error",__source:{fileName:c,lineNumber:22,columnNumber:28}},a.position_id.message))},N=a.p+"img/close.svg",f=(a(784),"E:\\NODE\\abz-2020\\src\\components\\form\\components\\modal\\modal.js");m().setAppElement("#root");var d=e=>{var{closeModal:r,title:a,text:t,btnText:m}=e;return o.createElement(o.Fragment,null,o.createElement("div",{className:"modal__container",__source:{fileName:f,lineNumber:12,columnNumber:7}},o.createElement("div",{className:"modal__header",__source:{fileName:f,lineNumber:13,columnNumber:9}},o.createElement("h3",{className:"modal__title",__source:{fileName:f,lineNumber:14,columnNumber:11}},a),o.createElement("button",{onClick:r,className:"modal__close",__source:{fileName:f,lineNumber:15,columnNumber:11}},o.createElement("img",{src:N,__source:{fileName:f,lineNumber:16,columnNumber:13}})))),o.createElement("div",{className:"modal__container",__source:{fileName:f,lineNumber:20,columnNumber:7}},o.createElement("div",{className:"modal__text",__source:{fileName:f,lineNumber:21,columnNumber:9}},t)),o.createElement("div",{className:"modal__container",__source:{fileName:f,lineNumber:25,columnNumber:7}},o.createElement("div",{className:"modal__footer",__source:{fileName:f,lineNumber:26,columnNumber:9}},o.createElement("button",{onClick:r,className:"modal__btn",__source:{fileName:f,lineNumber:28,columnNumber:11}},m))))},b=a(3443),p=a(5868),h=(a(5991),"E:\\NODE\\abz-2020\\src\\components\\form\\form.js");function v(){return(v=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e}).apply(this,arguments)}function g(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),a.push.apply(a,o)}return a}function E(e){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?g(Object(a),!0).forEach((function(r){y(e,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))}))}return e}function y(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function x(e,r,a,o,t,m,l){try{var n=e[m](l),i=n.value}catch(e){return void a(e)}n.done?r(i):Promise.resolve(i).then(o,t)}var w=e=>e.replace(/[^+\d]/g,""),P=()=>{var{getUsers:e,getPositions:r,getToken:a,userRegisterRequest:t}=(0,o.useContext)(u.Z),{register:i,handleSubmit:c,setError:N,clearErrors:f,errors:g}=(0,n.cI)(),{errorPositions:y,loadingPositions:P,fetchedPositions:O}=s(r),S=(()=>{var[e,r]=(0,o.useState)(!1),a=()=>r(!1);return{bind:{isOpen:e,onRequestClose:a,onAfterOpen:()=>{var e=window.innerWidth-document.body.offsetWidth+"px";document.body.style.paddingRight=e,document.body.style.overflow="hidden"},onAfterClose:()=>{document.body.style.paddingRight="",document.body.style.overflow="auto"}},closeModal:a,openModal:()=>r(!0)}})(),{choosedFilename:j,clearChoosedFilename:k,chooseFilename:z,submitError:F,clearSubmitError:M,setSubmitError:C,disabledSubmitBtn:R,enableSubmitBtn:q,disableSubmitBtn:L}=(()=>{var[e,r]=(0,o.useState)(null),[a,t]=(0,o.useState)(null),[m,l]=(0,o.useState)(!1);return{choosedFilename:e,clearChoosedFilename:()=>r(null),chooseFilename:e=>r(e),submitError:a,clearSubmitError:()=>t(null),setSubmitError:t,disabledSubmitBtn:m,enableSubmitBtn:()=>l(!1),disableSubmitBtn:()=>l(!0)}})(),B=(0,l.I0)(),U=function(){var r,o=(r=function*(r,o){M(),L();try{var m=yield a();if(!m.data.success)throw Error("The API doesn't return token");yield t(E(E({},r),{},{phone:w(r.phone),token:m.data.token})),S.openModal(),o.target.reset(),k(),B((0,p.uh)(e,6)),q()}catch(e){var l,n,i,s;if((null===(l=e.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)?C(e.response.data.message):C(e.message),null===(i=e.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.fails)for(var u in e.response.data.fails)N(u,{type:"apiError",message:e.response.data.fails[u][0]});else S.openModal()}finally{q()}},function(){var e=this,a=arguments;return new Promise((function(o,t){var m=r.apply(e,a);function l(e){x(m,o,t,l,n,"next",e)}function n(e){x(m,o,t,l,n,"throw",e)}l(void 0)}))});return function(e,r){return o.apply(this,arguments)}}(),X=(e,r)=>{if(f(r),e){if(z(e.name),e.size>5242880){var a="File size must not exceed 5MB";return N(r,{type:"size",message:a}),a}if("image/jpeg"!==e.type){var o="File should be jpg/jpeg image";return N(r,{type:"extention",message:o}),o}var t=window.URL||window.webkitURL,m=new Image;return m.src=t.createObjectURL(e),m.onload=function(){if(this.width<70||this.height<70){t.revokeObjectURL(this.src);var e="File should be with resolution at least 70x70px!";return N(r,{type:"resolution",message:e}),e}},!0}k()},A=P||y?null:o.createElement(_,{fetchedPositions:O,errors:g,register:i,__source:{fileName:h,lineNumber:121,columnNumber:7}});return o.createElement("section",{className:"form",__source:{fileName:h,lineNumber:125,columnNumber:5}},o.createElement("div",{className:"container-fluid",__source:{fileName:h,lineNumber:126,columnNumber:7}},o.createElement("div",{className:"row",id:"form",__source:{fileName:h,lineNumber:128,columnNumber:9}},o.createElement("div",{className:"col-md-8 offset-md-2",__source:{fileName:h,lineNumber:129,columnNumber:11}},o.createElement("h1",{className:"form__title",__source:{fileName:h,lineNumber:130,columnNumber:13}},"Register to get a work"))),o.createElement("div",{className:"row",__source:{fileName:h,lineNumber:134,columnNumber:9}},o.createElement("div",{className:"col-md-6 offset-md-3",__source:{fileName:h,lineNumber:135,columnNumber:11}},o.createElement("p",{className:"form__subtitle",__source:{fileName:h,lineNumber:136,columnNumber:13}},"Attention! After successful registration and alert, update the list of users in the block from the top"))),o.createElement("div",{className:"row",__source:{fileName:h,lineNumber:140,columnNumber:9}},o.createElement("div",{className:"col-md-6 offset-md-3 col-sm-12 col-12",__source:{fileName:h,lineNumber:141,columnNumber:11}},o.createElement("form",{className:"form__form",onSubmit:c(U),action:"#",noValidate:!0,__source:{fileName:h,lineNumber:142,columnNumber:13}},o.createElement("div",{className:"form__field",__source:{fileName:h,lineNumber:143,columnNumber:15}},o.createElement("label",{htmlFor:"form__name",__source:{fileName:h,lineNumber:144,columnNumber:17}},"Name"),o.createElement("input",{className:g.name?"form__name--error":"form__name",id:"form__name",name:"name",placeholder:"Your name",ref:i({required:"Name is required",maxLength:{value:60,message:"Max length is 60 characters"},minLength:{value:2,message:"Min length is 2 characters"}}),__source:{fileName:h,lineNumber:145,columnNumber:17}}),g.name&&o.createElement("div",{className:"form__error",__source:{fileName:h,lineNumber:162,columnNumber:33}},g.name.message)),o.createElement("div",{className:"form__field",__source:{fileName:h,lineNumber:165,columnNumber:15}},o.createElement("label",{htmlFor:"form__email",__source:{fileName:h,lineNumber:166,columnNumber:17}},"Email"),o.createElement("input",{className:g.email?"form__email--error":"form__email",id:"form__email",placeholder:"Your email",name:"email",type:"email",ref:i({required:"Email is required",maxLength:{value:100,message:"Max length is 100 characters"},minLength:{value:2,message:"Min length is 2 characters"},pattern:{value:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/,message:"Email address must be according to RFC2822"}}),__source:{fileName:h,lineNumber:167,columnNumber:17}}),g.email&&o.createElement("div",{className:"form__error",__source:{fileName:h,lineNumber:191,columnNumber:34}},g.email.message)),o.createElement("div",{className:"form__field",__source:{fileName:h,lineNumber:194,columnNumber:15}},o.createElement("label",{htmlFor:"form__phone",__source:{fileName:h,lineNumber:195,columnNumber:17}},"Phone number"),o.createElement("input",{className:g.phone?"form__phone--error":"form__phone",id:"form__phone",name:"phone",ref:i({required:"Phone is required",validate:{checkNumber:e=>/^[\+]{0,1}380([0-9]{9})$/.test(w(e))||"Phone number should start with code of Ukraine +380"},maxLength:{value:18,message:"Max length is 18 characters"},minLength:{value:12,message:"Min length is 12 characters"}}),placeholder:"+380 XX XXX XX XX",type:"phone",__source:{fileName:h,lineNumber:196,columnNumber:17}}),g.phone&&o.createElement("div",{className:"form__error",__source:{fileName:h,lineNumber:218,columnNumber:34}},g.phone.message)),o.createElement("p",{className:"form__radioTitle",__source:{fileName:h,lineNumber:220,columnNumber:15}},"Select your position"),P?o.createElement(b.Z,{__source:{fileName:h,lineNumber:221,columnNumber:35}}):null,y?o.createElement("div",{className:"form__error",__source:{fileName:h,lineNumber:222,columnNumber:33}},y):null,A,o.createElement("p",{className:"form__uploadTitle",__source:{fileName:h,lineNumber:224,columnNumber:15}},"Photo"),o.createElement("div",{className:"form__uploadWrapper",__source:{fileName:h,lineNumber:225,columnNumber:15}},o.createElement("label",{className:g.photo?"form__labelUpload--error":"form__labelUpload",htmlFor:"form__upload",__source:{fileName:h,lineNumber:226,columnNumber:17}},o.createElement("input",{className:"form__upload",id:"form__upload",type:"file",name:"photo",onChange:e=>X(e.target.files[0],e.target.name),ref:i({required:"File is required",validate:e=>X(e[0],"photo")}),__source:{fileName:h,lineNumber:227,columnNumber:19}}),o.createElement("div",{className:"form__uploadPlaceholder",__source:{fileName:h,lineNumber:238,columnNumber:19}},j||"Upload your photo"),o.createElement("div",{className:"form__uploadButtonWrapper",__source:{fileName:h,lineNumber:239,columnNumber:19}},o.createElement("span",{__source:{fileName:h,lineNumber:240,columnNumber:21}},"Browse")))),g.photo&&o.createElement("div",{className:"form__error",__source:{fileName:h,lineNumber:244,columnNumber:32}},g.photo.message),o.createElement("input",{className:"button form__submit",value:"Sing up now",type:"submit",disabled:y||P||R,__source:{fileName:h,lineNumber:246,columnNumber:15}}))))),o.createElement(m(),v({overlayClassName:"ReactModal__Overlay",className:"ReactModal__Content"},S.bind,{__source:{fileName:h,lineNumber:257,columnNumber:7}}),o.createElement(d,{closeModal:S.closeModal,title:F?"Error":"Congratulations",text:F||"You have successfully passed the registration",btnText:F?"Ok":"Great",__source:{fileName:h,lineNumber:262,columnNumber:9}})))}},784:function(){},5991:function(){}}]);